(function(n,t){typeof define=="function"&&define.amd?define(["flickity/js/index","fizzy-ui-utils/utils",],t):typeof module=="object"&&module.exports?module.exports=t(require("flickity"),require("fizzy-ui-utils")):t(n.Flickity,n.fizzyUIUtils)})(this,function(n,t){var r=n.Slide,h=r.prototype.updateTarget,i,u,f,e,o,s;return r.prototype.updateTarget=function(){if(h.apply(this,arguments),this.parent.options.fade){var n=this.target-this.x,t=this.cells[0].x;this.cells.forEach(function(i){var r=i.x-t-n;i.renderPosition(r)})}},r.prototype.setOpacity=function(n){this.cells.forEach(function(t){t.element.style.opacity=n})},i=n.prototype,n.createMethods.push("_createFade"),i._createFade=function(){this.fadeIndex=this.selectedIndex;this.prevSelectedIndex=this.selectedIndex;this.on("select",this.onSelectFade);this.on("dragEnd",this.onDragEndFade);this.on("settle",this.onSettleFade);this.on("activate",this.onActivateFade);this.on("deactivate",this.onDeactivateFade)},u=i.updateSlides,i.updateSlides=function(){(u.apply(this,arguments),this.options.fade)&&this.slides.forEach(function(n,t){var i=t==this.selectedIndex?1:0;n.setOpacity(i)},this)},i.onSelectFade=function(){this.fadeIndex=Math.min(this.prevSelectedIndex,this.slides.length-1);this.prevSelectedIndex=this.selectedIndex},i.onSettleFade=function(){if(delete this.didDragEnd,this.options.fade){this.selectedSlide.setOpacity(1);var n=this.slides[this.fadeIndex];n&&this.fadeIndex!=this.selectedIndex&&this.slides[this.fadeIndex].setOpacity(0)}},i.onDragEndFade=function(){this.didDragEnd=!0},i.onActivateFade=function(){this.options.fade&&this.element.classList.add("is-fade")},i.onDeactivateFade=function(){this.options.fade&&(this.element.classList.remove("is-fade"),this.slides.forEach(function(n){n.setOpacity("")}))},f=i.positionSlider,i.positionSlider=function(){if(!this.options.fade){f.apply(this,arguments);return}this.fadeSlides();this.dispatchScrollEvent()},e=i.positionSliderAtSelected,i.positionSliderAtSelected=function(){this.options.fade&&this.setTranslateX(0);e.apply(this,arguments)},i.fadeSlides=function(){var i,f;if(!(this.slides.length<2)){var n=this.getFadeIndexes(),r=this.slides[n.a],u=this.slides[n.b],e=this.wrapDifference(r.target,u.target),t=this.wrapDifference(r.target,-this.x);t=t/e;r.setOpacity(1-t);u.setOpacity(t);i=n.a;this.isDragging&&(i=t>.5?n.a:n.b);f=this.fadeHideIndex!=undefined&&this.fadeHideIndex!=i&&this.fadeHideIndex!=n.a&&this.fadeHideIndex!=n.b;f&&this.slides[this.fadeHideIndex].setOpacity(0);this.fadeHideIndex=i}},i.getFadeIndexes=function(){return!this.isDragging&&!this.didDragEnd?{a:this.fadeIndex,b:this.selectedIndex}:this.options.wrapAround?this.getFadeDragWrapIndexes():this.getFadeDragLimitIndexes()},i.getFadeDragWrapIndexes=function(){var i=this.slides.map(function(n,t){return this.getSlideDistance(-this.x,t)},this),r=i.map(function(n){return Math.abs(n)}),u=Math.min.apply(Math,r),n=r.indexOf(u),f=i[n],e=this.slides.length,o=f>=0?1:-1;return{a:n,b:t.modulo(n+o,e)}},i.getFadeDragLimitIndexes=function(){for(var i,t=0,n=0;n<this.slides.length-1;n++){if(i=this.slides[n],-this.x<i.target)break;t=n}return{a:t,b:t+1}},i.wrapDifference=function(n,t){var i=t-n,r,u;return this.options.wrapAround?(r=i+this.slideableWidth,u=i-this.slideableWidth,Math.abs(r)<Math.abs(i)&&(i=r),Math.abs(u)<Math.abs(i)&&(i=u),i):i},o=i._getWrapShiftCells,i._getWrapShiftCells=function(){this.options.fade||o.apply(this,arguments)},s=i.shiftWrapCells,i.shiftWrapCells=function(){this.options.fade||s.apply(this,arguments)},n});